<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Divija | The Entropy of Love</title>
    <meta name="description" content="From Chaos to Order.">
    
    <!-- FONTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=JetBrains+Mono:wght@200;400;700&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --void: #030303;
            --starlight: #F0F0F0;
            --cyan-ether: #00F0FF;
            --red-shift: #FF0055;
            --gold-horizon: #FFD700;
            --matrix-green: #0F0;
            --entropy: 1; /* 1 = Chaos, 0 = Order */
            
            --f-display: 'Cinzel', serif;
            --f-code: 'JetBrains Mono', monospace;
            --f-body: 'Montserrat', sans-serif;
            
            --grid-gap: 2rem;
        }

        /* --- CORE RESET & BASICS --- */
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
        
        html, body {
            width: 100%;
            height: 100%;
            background-color: var(--void);
            color: var(--starlight);
            font-family: var(--f-body);
            overflow-x: hidden;
            cursor: none; /* Custom cursor is mandatory */
        }
        
        /* Smooth scrolling with inertia feel handled by JS, but native as fallback */
        html { scroll-behavior: smooth; }

        /* --- 1. THE SINGULARITY (Entrance) --- */
        #singularity-gate {
            position: fixed;
            inset: 0;
            z-index: 9999;
            background: var(--void);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 1.5s cubic-bezier(0.7, 0, 0.3, 1);
        }
        
        .singularity-point {
            width: 8px;
            height: 8px;
            background: var(--starlight);
            border-radius: 50%;
            box-shadow: 0 0 20px var(--starlight), 0 0 50px var(--cyan-ether);
            cursor: none;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            animation: breathe 3s infinite ease-in-out;
            position: relative;
        }
        
        .singularity-point::after {
            content: '';
            position: absolute;
            inset: -20px;
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 50%;
            animation: spin-slow 10s linear infinite;
        }
        
        .click-hint {
            margin-top: 40px;
            font-family: var(--f-code);
            font-size: 0.8rem;
            letter-spacing: 0.3em;
            color: rgba(255,255,255,0.3);
            text-transform: uppercase;
            animation: flicker 2s infinite;
        }
        
        /* Explosion Animation Class */
        body.bang #singularity-gate {
            opacity: 0;
            pointer-events: none;
        }
        
        /* --- 2. BACKEND VISUALS --- */
        #universe-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0; /* Hidden until Big Bang */
            transition: opacity 2s ease-in;
        }
        body.bang #universe-canvas { opacity: 1; }

        /* --- 3. UI OVERLAY --- */
        .hud {
            position: fixed;
            top: 2rem;
            left: 2rem;
            right: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            pointer-events: none;
            z-index: 100;
            mix-blend-mode: difference;
            opacity: 0;
            transition: opacity 1s 1s;
        }
        body.bang .hud { opacity: 1; }

        .sys-info {
            font-family: var(--f-code);
            font-size: 0.75rem;
            color: var(--cyan-ether);
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .entropy-display {
            text-align: right;
            font-family: var(--f-code);
        }
        .entropy-label { font-size: 0.7rem; color: var(--red-shift); }
        .entropy-val { font-size: 1.5rem; font-weight: 700; color: var(--starlight); }

        /* Progress Line */
        .timeline-track {
            position: fixed;
            right: 2rem;
            top: 50%;
            transform: translateY(-50%);
            height: 200px;
            width: 2px;
            background: rgba(255,255,255,0.05);
            z-index: 90;
        }
        .timeline-thumb {
            position: absolute;
            top: 0;
            left: -1px;
            width: 4px;
            height: 20px;
            background: var(--cyan-ether);
            box-shadow: 0 0 10px var(--cyan-ether);
            transition: top 0.1s linear;
        }

        /* --- 4. SCROLL CONTENT --- */
        #main-viewport {
            opacity: 0;
            transition: opacity 1s 0.5s;
        }
        body.bang #main-viewport { opacity: 1; }

        section {
            min-height: 100vh;
            padding: 6rem 2rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
        }

        /* Typography */
        h1, h2 {
            font-family: var(--f-display);
            color: var(--starlight);
            line-height: 1.1;
            margin-bottom: 2rem;
        }
        h1 { font-size: clamp(3rem, 8vw, 6rem); }
        h2 { font-size: clamp(2rem, 5vw, 4rem); }
        
        .subtitle {
            font-family: var(--f-code);
            color: var(--cyan-ether);
            margin-bottom: 1rem;
            display: block;
        }
        
        p {
            font-size: 1.1rem;
            line-height: 1.8;
            color: rgba(255,255,255,0.8);
            max-width: 65ch;
            margin-bottom: 1.5rem;
        }

        /* Highlight Logic */
        .highlight {
            position: relative;
            display: inline-block;
            color: var(--gold-horizon);
            font-weight: 600;
        }
        .highlight::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 1px;
            background: var(--gold-horizon);
            transform: scaleX(0);
            transform-origin: right;
            transition: transform 0.6s cubic-bezier(0.19, 1, 0.22, 1);
        }
        .highlight:hover::after {
            transform: scaleX(1);
            transform-origin: left;
        }

        /* --- 5. HOLOGRAPHIC IMAGE GRID (Bento Box) --- */
        .holo-grid {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            grid-auto-rows: 300px;
            gap: 2rem;
            margin: 4rem 0;
            perspective: 1000px;
        }

        .holo-card {
            position: relative;
            grid-column: span 12;
            background: rgba(10,10,10,0.5);
            border: 1px solid rgba(255,255,255,0.1);
            overflow: hidden;
            cursor: none;
            transition: transform 0.3s, border-color 0.3s;
        }

        /* Desktop Layout Logic */
        @media (min-width: 900px) {
            .holo-card.portrait { grid-column: span 4; grid-row: span 2; }
            .holo-card.landscape { grid-column: span 8; grid-row: span 1; }
            .holo-card.wide { grid-column: span 8; grid-row: span 1; }
        }

        /* The Image Shard Logic */
        .holo-content {
            width: 100%;
            height: 100%;
            position: relative;
            /* Chaos State */
            filter: grayscale(100%) contrast(1.2) brightness(0.7);
            transform: scale(1.1);
            transition: all 0.8s cubic-bezier(0.19, 1, 0.22, 1);
        }

        /* Shards (Clip Path overlays) */
        .shard {
            position: absolute;
            inset: 0;
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center;
            opacity: 0.5;
            transition: transform 0.5s ease-out;
            pointer-events: none;
            mix-blend-mode: hard-light;
        }
        
        .holo-card:not(.stabilized) .shard:nth-child(1) { clip-path: polygon(0 0, 40% 0, 60% 100%, 0% 100%); transform: translate(-5px, 2px); }
        .holo-card:not(.stabilized) .shard:nth-child(2) { clip-path: polygon(40% 0, 100% 0, 100% 40%, 60% 100%); transform: translate(5px, -2px); }
        .holo-card:not(.stabilized) .shard:nth-child(3) { clip-path: polygon(100% 40%, 100% 100%, 60% 100%); transform: translate(2px, 5px); }
        
        /* Scanline */
        .scan-bar {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--red-shift);
            box-shadow: 0 0 15px var(--red-shift);
            opacity: 0;
            z-index: 10;
            pointer-events: none;
        }

        /* STABILIZED STATE */
        .holo-card.stabilized {
            border-color: var(--gold-horizon);
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.1);
        }
        .holo-card.stabilized .holo-content {
            filter: grayscale(0%) contrast(1) brightness(1);
            transform: scale(1);
        }
        .holo-card.stabilized .shard {
            transform: translate(0, 0);
            opacity: 0; /* Hide shards, reveal main image */
        }
        .holo-card.stabilized .scan-bar {
            background: var(--gold-horizon);
            box-shadow: 0 0 15px var(--gold-horizon);
            animation: scan-success 1s forwards;
            opacity: 1;
        }
        
        /* Interactive Prompt */
        .interact-prompt {
            position: absolute;
            bottom: 1rem;
            left: 1rem;
            font-family: var(--f-code);
            font-size: 0.7rem;
            background: black;
            color: var(--red-shift);
            padding: 0.2rem 0.5rem;
            border: 1px solid var(--red-shift);
            z-index: 5;
            transition: all 0.3s;
        }
        .holo-card.stabilized .interact-prompt {
            color: var(--gold-horizon);
            border-color: var(--gold-horizon);
            content: "STABLE";
        }

        .holo-img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Crucial: Ensures images fill the bento box */
            display: block;
        }

        /* --- 6. ADVANCED CURSOR --- */
        #cursor-sys {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 99999;
            mix-blend-mode: difference;
        }
        
        .cursor-dot {
            position: absolute;
            width: 6px;
            height: 6px;
            background: var(--cyan-ether);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.2s, height 0.2s, background 0.2s;
        }
        
        .cursor-ring {
            position: absolute;
            width: 40px;
            height: 40px;
            border: 1px solid rgba(255,255,255,0.5);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.1s ease-out;
        }
        
        /* Cursor Interaction States */
        body.hovering .cursor-dot { width: 10px; height: 10px; background: var(--gold-horizon); }
        body.hovering .cursor-ring { width: 60px; height: 60px; border-color: var(--gold-horizon); border-style: dashed; animation: rotate-cursor 4s linear infinite; }
        
        /* --- 7. FOOTER PUNCHLINE --- */
        .sys-log {
            background: rgba(255,255,255,0.03);
            border-left: 2px solid var(--cyan-ether);
            padding: 2rem;
            font-family: var(--f-code);
            margin-top: 2rem;
        }
        .final-msg {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--starlight);
            text-shadow: 0 0 20px var(--cyan-ether);
            margin-top: 1rem;
            display: block;
        }

        /* --- KEYFRAMES --- */
        @keyframes breathe { 0%,100% { transform: scale(1); opacity: 0.8; } 50% { transform: scale(1.2); opacity: 1; } }
        @keyframes spin-slow { 100% { transform: rotate(360deg); } }
        @keyframes flicker { 0%, 100% { opacity: 0.3; } 50% { opacity: 0.8; } 10%, 90% { opacity: 0.1; } }
        @keyframes rotate-cursor { 100% { transform: translate(-50%, -50%) rotate(360deg); } }
        @keyframes scan-success { 0% { top: 0; opacity: 1; } 100% { top: 100%; opacity: 0; } }

        /* Mobile Adjustments */
        @media (max-width: 768px) {
            #cursor-sys { display: none; }
            body { cursor: auto; }
            .holo-card { grid-column: span 12 !important; height: 250px; }
            h1 { font-size: 3rem; }
        }
    </style>
</head>
<body>

    <!-- AUDIO SYSTEM -->
    <audio id="bg-audio" loop preload="auto">
        <source src="Pisces - Tony Ann (Piano Cover).mp3" type="audio/mpeg">
    </audio>

    <!-- CUSTOM CURSOR -->
    <div id="cursor-sys">
        <div class="cursor-dot" id="c-dot"></div>
        <div class="cursor-ring" id="c-ring"></div>
    </div>

    <!-- 1. ENTRANCE: SINGULARITY -->
    <div id="singularity-gate">
        <div class="singularity-point" id="btn-bang"></div>
        <div class="click-hint">Initialize Reality</div>
    </div>

    <!-- 2. BACKEND: THE UNIVERSE -->
    <canvas id="universe-canvas"></canvas>

    <!-- 3. UI OVERLAY -->
    <div class="hud">
        <div class="sys-info">
            <span>SYS.DIVIJA // V.FINAL</span>
            <span id="coord-disp">X:000 Y:000</span>
        </div>
        <div class="entropy-display">
            <div class="entropy-label">CURRENT ENTROPY</div>
            <div class="entropy-val" id="entropy-num">100.0%</div>
        </div>
    </div>
    <div class="timeline-track"><div class="timeline-thumb" id="progress-thumb"></div></div>

    <!-- 4. CONTENT SCROLL -->
    <main id="main-viewport">
        
        <!-- SEC 1: ORIGIN -->
        <section id="origin">
            <span class="subtitle">&lt;Origin_Point /&gt;</span>
            <h1>The Chaos Equation</h1>
            <p>
                When our variables first interacted, the output was <span class="highlight">NaN</span> (Not a Number).
                I saw a "tough cookie" with a firewall so advanced it dropped every packet I sent.
                I labeled the system: <strong>Rude. Immaturity masked as strength.</strong>
            </p>
            <p>
                I prepared to execute <code>connection.terminate()</code>.
            </p>
        </section>

        <!-- SEC 2: EVIDENCE (BENTO GRID) -->
        <section id="evidence">
            <span class="subtitle">&lt;Visual_Reconstruction /&gt;</span>
            <h2>Stabilizing Memories</h2>
            <p style="font-size: 0.9rem; font-family: var(--f-code); margin-bottom: 2rem; color: var(--red-shift);">
                [WARNING]: Data corruption detected. Click shards to fuse.
            </p>

            <div class="holo-grid">
                <!-- Image 1: Portrait (Takes tall slot) -->
                <div class="holo-card portrait" data-status="chaos">
                    <div class="scan-bar"></div>
                    <div class="interact-prompt">[ FIX CORRUPTION ]</div>
                    <!-- Main Img -->
                    <div class="holo-content">
                        <img src="K1.png" alt="Resilience" class="holo-img lazy">
                    </div>
                    <!-- CSS Shards for Effect -->
                    <div class="shard" style="background-image: url('K1.png')"></div>
                    <div class="shard" style="background-image: url('K1.png')"></div>
                    <div class="shard" style="background-image: url('K1.png')"></div>
                </div>

                <!-- Image 2: Landscape (Wide) -->
                <div class="holo-card landscape" data-status="chaos">
                    <div class="scan-bar"></div>
                    <div class="interact-prompt">[ FIX CORRUPTION ]</div>
                    <div class="holo-content">
                        <img src="K2.png" alt="Brilliance" class="holo-img lazy">
                    </div>
                    <div class="shard" style="background-image: url('K2.png')"></div>
                    <div class="shard" style="background-image: url('K2.png')"></div>
                    <div class="shard" style="background-image: url('K2.png')"></div>
                </div>

                <!-- Image 3: Landscape (Wide) -->
                <div class="holo-card wide" data-status="chaos">
                    <div class="scan-bar"></div>
                    <div class="interact-prompt">[ FIX CORRUPTION ]</div>
                    <div class="holo-content">
                        <img src="K3.png" alt="The Bond" class="holo-img lazy">
                    </div>
                    <div class="shard" style="background-image: url('K3.png')"></div>
                    <div class="shard" style="background-image: url('K3.png')"></div>
                    <div class="shard" style="background-image: url('K3.png')"></div>
                </div>
            </div>
        </section>

        <!-- SEC 3: ANALYSIS -->
        <section id="analysis">
            <span class="subtitle">&lt;Deep_Learning_Results /&gt;</span>
            <h2>The Constant</h2>
            <p>
                But I ran the calculation again. I solved for <span class="highlight">X</span>.
                Beneath the "rude" encryption was a mind of geometric perfection.
                Beneath the "toughness" was a heart so rare it needed a vault.
            </p>
            <p>
                You analyze your reflection and see errors. I see the <span class="highlight">Golden Ratio</span>.
            </p>
            <div class="sys-log">
                <p style="margin:0; font-size: 0.9rem; color: var(--cyan-ether);">>> SYSTEM NOTIFICATION</p>
                <p style="margin-top: 0.5rem;">Milestone Reached: <strong>MATURITY</strong></p>
                <p>You have evolved. You are the peace to my chaos.</p>
            </div>
        </section>

        <!-- SEC 4: CONCLUSION -->
        <section id="conclusion" style="text-align: center; align-items: center;">
            <p style="font-family: var(--f-code); color: var(--red-shift);">[ FINAL MESSAGE ]</p>
            <p>As much as you might try to rewrite the variable...</p>
            <span class="final-msg">I will always be DADDY</span>
            
            <div style="margin-top: 4rem; position: relative;">
                <h2 style="color: var(--gold-horizon); text-shadow: 0 0 30px var(--gold-horizon);">Happy Birthday, Divija</h2>
                <div style="font-family: var(--f-code); font-size: 0.8rem; opacity: 0.5;">End of Line.</div>
            </div>
        </section>
        
        <div style="height: 20vh;"></div>
    </main>

    <script>
        /**
         * THE ENTROPY ENGINE V3.0 (Optimized for 60fps)
         * - Uses TypedArrays for particle data (Zero GC overhead)
         * - Single Canvas rendering
         * - Interactive Hologram Logic
         */
        (function() {
            'use strict';

            // --- CONFIG ---
            const CONFIG = {
                particleCount: 1500, // High density possible due to optimization
                baseSpeed: 0.5,
                connectionRadius: 100,
                colors: ['#00F0FF', '#FF0055', '#FFD700', '#FFFFFF']
            };

            // --- STATE ---
            const state = {
                entropy: 1.0, // 1 = chaos, 0 = order
                mx: window.innerWidth / 2,
                my: window.innerHeight / 2,
                scrollProg: 0,
                width: window.innerWidth,
                height: window.innerHeight,
                active: false
            };

            // --- DOM ---
            const dom = {
                canvas: document.getElementById('universe-canvas'),
                ctx: document.getElementById('universe-canvas').getContext('2d', { alpha: false }),
                bangBtn: document.getElementById('btn-bang'),
                audio: document.getElementById('bg-audio'),
                entropyNum: document.getElementById('entropy-num'),
                coord: document.getElementById('coord-disp'),
                cards: document.querySelectorAll('.holo-card'),
                cursor: {
                    dot: document.getElementById('c-dot'),
                    ring: document.getElementById('c-ring')
                },
                progress: document.getElementById('progress-thumb')
            };

            // --- PARTICLE SYSTEM (Optimized) ---
            // Structure: [x, y, vx, vy, size, colorIndex, life]
            const STRIDE = 7;
            const particles = new Float32Array(CONFIG.particleCount * STRIDE);

            function initParticles() {
                dom.canvas.width = state.width;
                dom.canvas.height = state.height;
                
                for(let i = 0; i < CONFIG.particleCount; i++) {
                    const idx = i * STRIDE;
                    resetParticle(idx, true);
                }
            }

            function resetParticle(idx, randomStart = false) {
                // Spawn from center if not random start (Big Bang effect)
                if (!randomStart) {
                    particles[idx] = state.width / 2;
                    particles[idx + 1] = state.height / 2;
                } else {
                    particles[idx] = Math.random() * state.width;
                    particles[idx + 1] = Math.random() * state.height;
                }
                
                const angle = Math.random() * Math.PI * 2;
                const speed = Math.random() * CONFIG.baseSpeed + 0.2;
                
                particles[idx + 2] = Math.cos(angle) * speed; // vx
                particles[idx + 3] = Math.sin(angle) * speed; // vy
                particles[idx + 4] = Math.random() * 2; // size
                particles[idx + 5] = Math.floor(Math.random() * CONFIG.colors.length); // color
                particles[idx + 6] = Math.random(); // life phase
            }

            function render() {
                // Clear with trails
                dom.ctx.fillStyle = `rgba(3, 3, 3, ${0.1 + state.entropy * 0.2})`;
                dom.ctx.fillRect(0, 0, state.width, state.height);

                const time = Date.now() * 0.001;
                
                for(let i = 0; i < CONFIG.particleCount; i++) {
                    const idx = i * STRIDE;
                    
                    // Update
                    let vx = particles[idx + 2];
                    let vy = particles[idx + 3];
                    
                    // Noise/Flow field approximation
                    const noise = Math.sin(particles[idx] * 0.002 + time) * Math.cos(particles[idx + 1] * 0.002);
                    
                    // Entropy influence: High entropy = erratic, Low entropy = aligned
                    if (state.entropy > 0.5) {
                        vx += noise * 0.05;
                        vy += noise * 0.05;
                    } else {
                        // Order: Circular gentle motion
                        vx += (state.mx - particles[idx]) * 0.0001;
                        vy += (state.my - particles[idx + 1]) * 0.0001;
                    }

                    particles[idx] += vx * (1 + state.entropy * 2);
                    particles[idx + 1] += vy * (1 + state.entropy * 2);

                    // Bounds wrap
                    if(particles[idx] < 0 || particles[idx] > state.width || 
                       particles[idx+1] < 0 || particles[idx+1] > state.height) {
                        resetParticle(idx, true);
                    }

                    // Draw
                    const colorHex = CONFIG.colors[particles[idx+5]];
                    dom.ctx.fillStyle = colorHex;
                    dom.ctx.beginPath();
                    dom.ctx.arc(particles[idx], particles[idx+1], particles[idx+4], 0, Math.PI*2);
                    dom.ctx.fill();
                }

                requestAnimationFrame(render);
            }

            // --- INTERACTION ---
            function handleScroll() {
                const total = document.documentElement.scrollHeight - window.innerHeight;
                state.scrollProg = window.scrollY / total;
                
                // Entropy decreases as we scroll down (Chaos -> Order)
                // But increases slightly at the end for the "Big Bang" of emotion
                state.entropy = 1 - (state.scrollProg * 0.9);
                
                // Update UI
                dom.entropyNum.innerText = (state.entropy * 100).toFixed(1) + "%";
                dom.entropyNum.style.color = state.entropy > 0.5 ? '#FF0055' : '#00F0FF';
                
                // Progress Bar
                dom.progress.style.top = (state.scrollProg * 100) + "%";
                
                // CSS Variable for global effects
                document.documentElement.style.setProperty('--entropy', state.entropy);
            }

            function handleCursor(e) {
                state.mx = e.clientX;
                state.my = e.clientY;
                
                // Laggy Follower
                dom.cursor.dot.style.transform = `translate(${e.clientX}px, ${e.clientY}px)`;
                
                // Slight delay for ring handled by CSS transition, just update pos
                setTimeout(() => {
                    dom.cursor.ring.style.transform = `translate(${e.clientX}px, ${e.clientY}px)`;
                }, 50);

                // Update coord display
                dom.coord.innerText = `X:${Math.round(e.clientX)} Y:${Math.round(e.clientY)}`;
            }

            // --- HOLOGRAPHIC LOGIC ---
            function initHolograms() {
                dom.cards.forEach(card => {
                    // Hover Effect
                    card.addEventListener('mouseenter', () => document.body.classList.add('hovering'));
                    card.addEventListener('mouseleave', () => document.body.classList.remove('hovering'));
                    
                    // Click to Stabilize
                    card.addEventListener('click', () => {
                        if (card.dataset.status === 'stable') return;
                        
                        // Play sound
                        playClickSound();
                        
                        // Change state
                        card.dataset.status = 'stable';
                        card.classList.add('stabilized');
                        
                        // Update text prompt
                        const prompt = card.querySelector('.interact-prompt');
                        prompt.innerText = "RECONSTRUCTION COMPLETE";
                        
                        // reduce global entropy slightly
                        state.entropy -= 0.1;
                    });
                });
            }

            function playClickSound() {
                // Simple synthesized blip to avoid external dependencies failing
                const ctx = new (window.AudioContext || window.webkitAudioContext)();
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();
                
                osc.type = 'sine';
                osc.frequency.setValueAtTime(800, ctx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(1200, ctx.currentTime + 0.1);
                
                gain.gain.setValueAtTime(0.1, ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.2);
                
                osc.connect(gain);
                gain.connect(ctx.destination);
                osc.start();
                osc.stop(ctx.currentTime + 0.2);
            }

            // --- THE BIG BANG (Initialization) ---
            dom.bangBtn.addEventListener('click', () => {
                state.active = true;
                document.body.classList.add('bang');
                
                // Start Audio
                dom.audio.volume = 0.5;
                dom.audio.play().catch(e => console.log("Audio requires interaction"));
                
                // Init systems
                initParticles();
                render();
                window.addEventListener('scroll', handleScroll);
                window.addEventListener('mousemove', handleCursor);
                initHolograms();
                
                // Fallback for asset loading
                document.querySelectorAll('.lazy').forEach(img => {
                    // Fallback generator if image fails
                    img.onerror = () => {
                        img.style.display = 'none';
                        img.parentElement.style.background = 'linear-gradient(45deg, #111, #222)';
                        img.parentElement.innerHTML += '<div style="position:absolute;inset:0;display:flex;align-items:center;justify-content:center;color:#333;font-family:monospace;">[IMG_MISSING]</div>';
                    };
                });
            });

            // Resize handler
            window.addEventListener('resize', () => {
                state.width = window.innerWidth;
                state.height = window.innerHeight;
                dom.canvas.width = state.width;
                dom.canvas.height = state.height;
            });

        })();
    </script>
</body>
</html>
